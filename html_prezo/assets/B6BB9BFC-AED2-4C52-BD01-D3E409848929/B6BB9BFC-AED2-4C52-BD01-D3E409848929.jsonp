local_slide( { "name" : "B6BB9BFC-AED2-4C52-BD01-D3E409848929", "json" : {"assets":{"F24E75EB80CF7EA7A00E58A1689DF87F":{"type":"texture","index":49,"assetRequest":{"type":"slide","state":"outgoing","slide":"B6BB9BFC-AED2-4C52-BD01-D3E409848929"},"url":"assets/F24E75EB80CF7EA7A00E58A1689DF87F.svg","width":1024,"height":768},"9C6244F9220D9F25C99075A71D3D32D6":{"type":"texture","index":50,"assetRequest":{"type":"slide","state":"incoming","slide":"BB09B327-3911-4051-9927-A1DD45ED0168"},"url":"assets/9C6244F9220D9F25C99075A71D3D32D6.svg","width":1024,"height":768}},"events":[{"effects":[{"beginTime":0,"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":true,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"0","layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,-0.0004922987690640373,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":15,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"9C6244F9220D9F25C99075A71D3D32D6"},{"animations":[{"from":{"scalar":false},"beginTime":0,"repeatCount":0,"fillMode":"both","property":"hidden","duration":0.01,"to":{"scalar":true}}],"layers":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"F24E75EB80CF7EA7A00E58A1689DF87F"}]}]},"effects":[],"duration":0.01,"type":"transition","name":"none","objectID":"0"}],"automaticPlay":false,"hyperlinks":[],"accessibility":[{"text":"class Tweet < ActiveRecord::Base","targetRectangle":{"y":188.0000028624492,"x":27.45114905004607,"width":462.375,"height":28}},{"text":"  def self.nearby(lat: 39.2472, lng: -84.3761, count: 5)","targetRectangle":{"y":216.0000028624492,"x":27.45114905004607,"width":809.15625,"height":28}},{"text":"    sql = <<-SQL","targetRectangle":{"y":244.0000028624492,"x":27.45114905004607,"width":231.1875,"height":28}},{"text":"      SELECT *,","targetRectangle":{"y":272.0000028624492,"x":27.45114905004607,"width":216.73828125,"height":28}},{"text":"        geom <-> ST_GeomFromEWKT('SRID=3857;POINT (:lng :lat)') as distance","targetRectangle":{"y":300.0000028624492,"x":27.45114905004607,"width":968.09765625,"height":56}},{"text":"      FROM tweets","targetRectangle":{"y":356.0000028624492,"x":27.45114905004607,"width":245.63671875,"height":28}},{"text":"      ORDER BY distance     ","targetRectangle":{"y":384.0000028624492,"x":27.45114905004607,"width":404.578125,"height":28}},{"text":"      LIMIT :count;","targetRectangle":{"y":412.0000028624492,"x":27.45114905004607,"width":274.53515625,"height":28}},{"text":"    SQL","targetRectangle":{"y":440.0000028624492,"x":27.45114905004607,"width":101.14453125,"height":28}},{"text":"    Tweet.find_by_sql([sql, { lat: lat, lng: lng, count: count }])","targetRectangle":{"y":496.0000028624492,"x":27.45114905004607,"width":953.6484375,"height":28.00000000000006}},{"text":"  end","targetRectangle":{"y":524.0000028624493,"x":27.45114905004607,"width":72.24609375,"height":28}},{"text":"end","targetRectangle":{"y":552.0000028624493,"x":27.45114905004607,"width":43.34765625,"height":28}},{"text":"pasted-image.png","targetRectangle":{"y":23.62100219726562,"x":821.501220703125,"width":161.9987487792969,"height":192.7579956054688}},{"text":"Add SQL to Model","targetRectangle":{"y":72,"x":118.790234375,"width":662.4000000000001,"height":96}},{"text":"A simple example, but this is how you could include a raw SQL query in your AR model. You may wish to exclude the Geom column in a production app since it can be large and is of little use to your Ruby code (youâ€™re interested in the results calculated via the Geom column; not the column itself).","targetRectangle":{"y":590.6669992414089,"x":49.66344264093209,"width":847.044,"height":66}},{"text":"Note the #find_by_sql syntax used here; this is the safe way to include potentially dangerous strings in your SQL. Again, in a real app you would want to consider abstracting this away into a separate class for clarity/safety from devs not familiar with PostGIS.","targetRectangle":{"y":678.6669992414089,"x":49.66344264093209,"width":865.6740000000001,"height":66}}],"baseLayer":{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":true,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"objectID":"0","layers":[{"animations":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,-0.0004922987690640373,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":15,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"layers":[{"animations":[],"layers":[],"initialState":{"affineTransform":[1,0,0,1,0,0],"masksToBounds":false,"rotation":0,"scale":1,"position":{"pointX":512,"pointY":384},"width":1024,"sublayerTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"contentsRect":{"y":0,"x":0,"width":1,"height":1},"opacity":1,"edgeAntialiasingMask":0,"height":768,"hidden":false,"anchorPoint":{"pointX":0.5,"pointY":0.5}},"texture":"F24E75EB80CF7EA7A00E58A1689DF87F"}]}]}}]} } )